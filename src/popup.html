<!DOCTYPE html>
<html ng-app="uYtPlug">
	<head>
		<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
		<link rel="stylesheet" href="bootstrap.css">
		<style type='text/css'>
			body{
				background-color:  #EEEEEE;
				font-family: "Segoe UI", Tahoma, sans-serif;
				font-size: 75%;
			}
			.main{
				width: 300px;
				height: 300px;
				overflow-y: auto;
				position: relative;
			}
			.table-container{
				width: 100%;
				min-height: 230px;
			}
			table{
				width: 100%;
			}
			a{
				color: blue;
			}
			a.remove{
				color: red;
			}
			th:first-of-type{
				padding-top: 0px !important;
			}
			th{
				padding-top: 10px;
				padding-bottom:10px;
			}
			.btn-pressed{
				color: grey;
			}
			.empty{
				color: grey;
			}
			.alert{
				min-width: 380px;
				max-width: 430px;
				text-align: center;
				padding: 10px;
				overflow: auto;
			}
		</style>
		<script type="text/javascript" src="angular.min.js"></script>
		<script type="text/javascript" src="popup.js"></script>
	</head>
	<body ng-controller="main">
		<div ng-show="alert.active" class="alert">
			<span class="bold">{{alert.text}}</span><br /><br />
			<div class="align-right">
				<button type="button" class="btn btn-sm" ng-class="{'btn-danger': alert.confirmDanger, 'btn-primary': !alert.confirmDanger}" ng-click="alert.active = false;alert.confirm()">OK</button>
				<button type="button" class="btn btn-sm btn-secondary" ng-show="alert.cancelButton" ng-click="alert.active = false;alert.reject()">Cancel</button>		
			</div>
		</div>

		<div ng-hide="alert.active" class="main">
			<div class="table-container">
				<table>
					<tr>
						<th>Whitelisted Channels</th>
						<th>
							<a href="" ng-click="refresh()" class="" ng-class="{'btn-pressed': refreshPressed}" ng-mousedown="refreshPressed=true" ng-mouseup="refreshPressed=false">
								<i class="fa fa-refresh" aria-hidden="true"></i>
							</a>
						</th>
					</tr>
					<tr ng-repeat="item in settings.whitelisted track by $index">
						<td>
							<a ng-click="open(item.id)" href>{{item.display}}</a>
						</td>
						<td>
							<a class="remove" href ng-click="removewhite($index)" title="Remove from whitelist">
								<i class="fa fa-minus-circle" aria-hidden="true"></i>
							</a>
						</td>
					</tr>
					<tr ng-if="!settings.whitelisted.length"><td class="empty">None.</td></tr>
					<tr><th>Blacklisted Advertisers</th></tr>
					<tr ng-repeat="item in settings.blacklisted track by $index">
						<td>
							<a ng-click="open(item.id)" href>{{item.display}}</a>
						</td>
						<td>
							<a class="remove" href ng-click="removeblack($index)" title="Remove from blacklist">
								<i class="fa fa-minus-circle" aria-hidden="true"></i>
							</a>
						</td>
					</tr>
					<tr ng-if="!settings.blacklisted.length"><td class="empty">None.</td></tr>
					<tr><th>Recently detected advertisers</th></tr>
					<tr ng-repeat="item in recentads | orderBy: '-' | limitTo: 5  track by $index">
						<td>
							<a ng-click="open(item.ucid)" href>{{(item.author ? item.author : item.title) | decodeURIComponent | limitTo:50}}</a>
						</td>
						<td>
							<a class="remove" ng-click="addblack($index)" href title="Add to blacklist">
								<i class="fa fa-ban" aria-hidden="true"></i>
							</a>
						</td>
					</tr>
					<tr ng-if="!recentads.length"><td class="empty">None.</td></tr>
				</table>
			</div>
			<div class="bottom">
				<hr/>
				<button type="button" class="btn btn-primary btn-sm" ng-click="export()" title="Export settings to file"><i class="fa fa-upload"></i> Export</button>
				<button type="button" class="btn btn-primary btn-sm" ng-click="import()" title="Import settings from file"><i class="fa fa-download"></i> Import</button>
				<button type="button" class="btn btn-danger btn-sm align-right" ng-click="clearsettings()" title="Clear all settings"><i class="fa fa-trash"></i></button>
				<input type="file" id="import" on-file-change="import(true, $event)" ng-model="fileimport" style="display: none">
			</div>
		</div>
	</body>

</html>
